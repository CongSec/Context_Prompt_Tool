
# 前言

最近看到[SiYuan Copilot](https://github.com/Achuan-2/siyuan-plugin-copilot)这款插件上线，感觉思路不错，所以省去以后复制文章的麻烦，弄了一款上下文工具，主要作用将思源笔记的文档，其他文件汇总到一起，作为上下文提示词喂给ai

优点：

1. 支持思源笔记批量导入
2. 保存备注提示词
3. 排序提示词
4. 递归扫描文件夹找出不同格式文件的纯文字部分

# 效果

![image](https://congsec.oss-cn-beijing.aliyuncs.com/image-20260120002213-epymid7.png)

![image](https://congsec.oss-cn-beijing.aliyuncs.com/image-20251108164209-jcscsih.png)

![image](https://congsec.oss-cn-beijing.aliyuncs.com/image-20260120002219-7fh0f7u.png)

![image](https://congsec.oss-cn-beijing.aliyuncs.com/image-20260120002228-5945dve.png)

![image](https://congsec.oss-cn-beijing.aliyuncs.com/image-20260120002234-q8dfwdp.png)

# 输出示例

## ai输入

```python
【手动提示词】
以下是模版：

--------------------------------------------------------------------------------
【手动提示词】
这是测试项的测试说明：
验证新建用户第一次登录系统时是否修改初始口令。
验证用户口令更新时间超出最小更新时间，系统强制修改口令时，不得使用上一次相同密码。
"（1）验证用户口令复杂度设置是否符合要求，口令长度大于等于8位（互联网系统为10位）且为数字、大小写字母、特殊字符3种及以上组合的；口令不得与账号名相同。
（2）验证用户口令是否为弱口令（禁止使用弱口令、默认口令、通用口令、长期不变口令及包含公司、部门、应用名称等易被攻击者猜测的口令片段）。"
验证客户端的登录失败次数超5次时，系统是否不再进行登录验证，直接返回登录失败次数过多，稍等再试等友好提示。
验证客户端登录成功时，当前用户的失败登录次数是否重置为0。
验证超过30分钟后，当前用户的失败登录次数是否重置为0。
系统管理后台不存在登录认证绕过缺陷，且对用户的访问进行有效校验
测试用户退出功能，用户手动清除用户会话并退出。

--------------------------------------------------------------------------------
【手动提示词】
这是测试项的测试步骤：
"1.打开用户登录页面，登录名称User1；
2.查看是否有修改口令提示信息；"
"1.通过后台或数据库修改测试用户注册时间，使得口令已使用时间为口令最小更新时间+1天。
2.执行测试账号登录系统，跳转到修改密码界面，尝试修改为前一次密码"
"分别用系统管理员、User1用户登录系统，进入密码更改页面，尝试修改口令为以下值，判断用户口令是否设置成功：(1)验证用户口令复杂度设置是否符合要求
1.1111Abcd
2.1111abc#
3.Abcdefg#
4.1111Abc#
5.空值
6.12345Aa
7.12345678
8.aaaaaaaa#
9.123567@
10.ABCDEFG@
11.Abcdefgh
12.1234567A
13.1234567a
14.abcdefg@
15.修改csg@1234用户的密码为csg@1234，判断是否可以设置成功
----------------------------------------------------------------
(2)验证用户口令是否为弱口令（常见密码组合、易猜测密码）
16.Nfdw@1234、cpzx123@、nwsyy112233、Syy123@.. 等（不能包含公司、部门名称缩写）
17.pwd@1234、pwd@12345、1234@pwd等（不能包含常见口令缩写）
18.Dwglpt123、wjyx@123、dljypt@1234等（不能包含系统名称缩写）
19.Admin@admin、password@password、Admin@12345等（不能包含常见口令、默认口令）
20.tanxu@123、tx@123、Zhangss123@等（不能包含姓名及缩写）"
"1.使用测试用户，连续输错5次密码，第6次输入正确密码，查看能否正常登录系统；
2.使用超级管理员，连续输错5次密码，第6次输入正确密码，查看能否正常登录系统；"
"分别使用使用普通用户账户、系统管理员用户进行以下操作：
1.连续输错4次密码；
2.第5次输入正确密码；
3.第6次输入错误密码；
4.第7次输入正确密码。"
"分别使用使用普通用户账户、系统管理员用户进行以下操作：
1.连续输错5次密码；
2.等待30分钟以上，再次输入正确密码。"
"1.打开管理后台登录页面，查看登录框是否自动填充用户名和口令
2.查看后台登录页面源码，查看代码中是否有3.注释的登录口令
3.在登录框中使用’ or 1=1# 尝试登录，查看是否可成功登录"
"1.用户test登录系统，使用burpsuite抓取用户登录的cookie信息以及token，并点击用户退出；
2.重新访问系统内部功能页面，修改cookie以及token信息为注销之前的用户，查看是否能够访问。"

--------------------------------------------------------------------------------
【手动提示词】
这是测试项的测试结果：
新用户首次登录无修改口令提示
口令修改可以设置前一次相同密码，无相关限制
密码口令可以设置简单口令，不符合密码复杂度要求
系统登录失败无上限次数，登录失败多次，不会锁定用户
系统登录失败无上限次数，失败登录次数不会重置
系统登录失败无上限次数，登录失败多次，不会锁定用户，失败登录次数不会重置
打开访问系统登录页面，登录框默认自动填充账号和密码
用户退出登录会话仍生效

--------------------------------------------------------------------------------
【手动提示词】
这是输出的问题详述
"问题简述：新用户首次登录无修改口令提示
修复建议：系统应添加初始默认口令首次登陆提示修改信息"
"问题简述：系统在强制修改口令时未校验历史密码，允许用户重复使用旧密码
修复建议：在密码修改流程中增加历史密码比对机制，禁止使用最近一次设置的密码"
"问题简述：
系统未按设计要求对密码复杂度进行有效校验，允许设置不符合复杂度策略的简单密码
修复建议：
（1）用户口令复杂度设置符合如下要求，口令长度大于等于8位（互联网系统为10位）且为数字、大小写字母、特殊字符3种及以上组合的；口令不得与账号名相同。
（2）用户口令不得使用弱口令（禁止使用弱口令、默认口令、通用口令、长期不变口令及包含公司、部门、应用名称等易被攻击者猜测的口令片段）。"
"问题简述：系统未对连续登录失败次数进行限制，无法阻止暴力破解攻击
修复建议：实施登录失败锁定机制，当连续失败超过5次时，应暂停登录验证并返回友好提示"
"问题简述：系统未实现登录失败次数累计机制，导致登录成功后的失败次数重置功能无效
修复建议：完善登录失败计数逻辑，确保用户成功登录后能正确将失败次数清零"
"问题简述：系统未实现超时重置机制，登录失败次数不会在30分钟后自动清零
修复建议：系统未实现超时重置机制，登录失败次数不会在30分钟后自动清零"
"问题简述：打开访问系统管理后台登录页面，登录框默认自动填充账号和密码
修复建议：系统管理后台登录页面，登录框不自动填充用户名和口令"
"问题简述：用户手动退出后，使用注销前的会话凭证仍可访问系统，存在会话未及时失效的安全风险
修复建议：完善退出机制，确保用户注销后立即使服务端会话失效并清除客户端凭证，防止会话被非法复用"

--------------------------------------------------------------------------------
【手动提示词】
接下来，你将辅助我编写问题详述的问题简述和修复建议
《此处输入自己的实际项目即可，此处懒得脱敏就不输出了》
```

## ai输出

```python
根据您的要求，我已将提供的测试项、测试步骤和测试结果进行了逐一映射，总共整理出 **26条** 问题详述（包含问题简述和修复建议）。

---

"1. 问题简述：新用户首次登录系统时，未提示修改初始默认口令，存在弱口令风险
修复建议：系统应在用户首次登录时增加强制或提示修改密码的流程，确保初始口令被及时更改。"

"2. 问题简述：用户口令超过授权天数（180天）未更新时，系统未提示修改或限制登录
修复建议：增加口令有效期校验逻辑，对长时间未修改密码的用户，在登录时强制要求修改密码或进行登录受限处理。"

"3. 问题简述：系统在强制用户（如超过180天未登录）修改口令时，未校验历史密码，允许使用上一次的相同密码
修复建议：在强制密码修改流程中增加历史密码比对机制，禁止用户使用最近一次或最近几次设置过的旧密码。"

"4. 问题简述：系统未强制执行密码复杂度策略，允许设置不符合要求的简单口令
修复建议：强制用户口令复杂度设置符合如下要求：口令长度大于等于8位（互联网系统为10位）且为数字、大小写字母、特殊字符3种及以上组合；同时禁止口令与账号名相同。"

"5. 问题简述：系统未对超过180天未登录的僵尸账户进行自动锁定，增加了账号被盗用的风险
修复建议：实施账户休眠或自动锁定策略，系统定期检测用户登录状态，对超过180天未登录的账户自动进行锁定处理。"

"6. 问题简述：系统未限制用户单会话登录，允许同一账号在不同终端/IP同时在线
修复建议：实施单点登录限制（Concurrent Session Control），当新会话建立时，自动清除或失效该账号之前的会话信息。"

"7. 问题简述：登录接口存在逻辑缺陷，攻击者通过删除请求包中的验证码字段可绕过校验直接登录
修复建议：后端必须强制校验验证码字段的存在性及内容的有效性，禁止空值、缺省字段导致的逻辑绕过。"

"8. 问题简述：超级管理员权限控制存在逻辑漏洞，允许超级管理员删除自身的账号
修复建议：在用户删除接口增加逻辑判断，禁止删除系统预置的超级管理员账号或当前登录的管理员账号，防止误删核心权限。"

"9. 问题简述：系统缺失用户状态管理功能，无法验证已禁用/锁定用户的登录限制（因无法执行锁定操作）
修复建议：完善用户管理模块，开发基础的“启用/禁用”或“锁定/解锁”状态字段及后端校验逻辑。"

"10. 问题简述：系统缺失用户禁用功能，超级管理员无法禁用或锁定除自己以外的其他用户
修复建议：在用户管理界面增加“禁用/锁定”按钮，赋予超级管理员对违规账号进行封禁的权限。"

"11. 问题简述：系统缺失用户解锁功能，超级管理员无法启用或解锁已被限制的用户
修复建议：在用户管理界面增加“启用/解锁”按钮，支持超级管理员恢复被封禁账号的访问权限。"

"12. 问题简述：普通管理员缺乏管理权限，无法禁用或锁定普通用户
修复建议：根据权限划分，赋予普通管理员对下级或普通用户账号进行“禁用/锁定”的操作权限。"

"13. 问题简述：普通管理员缺乏管理权限，无法启用或解锁普通用户
修复建议：根据权限划分，赋予普通管理员对下级或普通用户账号进行“启用/解锁”的操作权限。"

"14. 问题简述：系统缺失统一的角色管理页面，无法定义系统相关角色类型
修复建议：开发独立的角色管理模块，提供可视化的角色列表及定义界面，明确系统内的用户角色体系。"

"15. 问题简述：系统缺失角色与权限的关联功能，无法定义角色的访问控制列表（ACL）
修复建议：建立RBAC（基于角色的访问控制）模型，支持在角色管理页面为不同角色勾选、分配对应的系统操作权限。"

"16. 问题简述：系统缺失用户与角色的关联功能，无法为用户分配角色
修复建议：在用户管理或角色管理界面，增加用户-角色绑定功能，支持为一个用户分配一个或多个角色。"

"17. 问题简述：由于缺失角色管理功能，无法通过修改角色权限来实现用户权限的动态变更
修复建议：完善角色权限逻辑，确保修改角色的关联权限后，所有属于该角色的用户权限能实时或在下次登录时生效。"

"18. 问题简述：系统审计日志记录不全，缺失超级管理员的登录及关键操作日志（如用户身份、IP、操作内容等）
修复建议：完善日志记录模块，确保覆盖所有用户的登录、登出、授权及业务操作，并记录完整的时间、IP、用户ID及操作详情。"

"19. 问题简述：系统审计日志记录不全，缺失普通用户的登录及关键业务操作日志
修复建议：统一日志采集规范，确保普通用户的关键行为同样被完整记录，满足安全审计要求。"

"20. 问题简述：系统审计日志分析能力不足，无法识别异地操作、频繁操作或敏感资源操作
修复建议：在记录基础日志的基础上，增加行为分析功能或报表，能够识别并标记异常行为（如短时间多IP登录、敏感数据访问）。"

"21. 问题简述：系统审计日志不支持按时间、用户、资源等单一条件查询详细信息
修复建议：在审计日志页面提供筛选功能，支持管理员通过时间段、用户名、操作类型等单一维度检索日志。"

"22. 问题简述：系统审计日志不支持多条件组合查询，难以精确定位审计记录
修复建议：优化日志检索引擎，支持“时间+用户+操作类型”等多种条件的组合筛选查询。"

"23. 问题简述：系统存在垂直越权漏洞，普通管理员可通过API调用未授权的超级管理员功能（如新增用户、查询日志）
修复建议：在所有敏感业务的后端API接口中增加严格的权限鉴别逻辑（ACL check），验证当前请求用户的身份与角色是否具备执行该操作的权限。"

"24. 问题简述：生产环境网页前端存在Source Map文件泄露，攻击者可还原源代码分析逻辑
修复建议：在生产环境构建和部署配置中（如Webpack配置），关闭Source Map文件的生成或禁止其上传至公开Web目录。"

"25. 问题简述：用户手动退出后，服务端的Token/Session未及时失效，旧凭证仍可被重放使用
修复建议：完善退出机制，确保用户点击注销后，服务端立即销毁对应的Session或将Token加入黑名单，防止会话被非法复用。"

"26. 问题简述：登录框的账号密码采用明文传输，未进行非对称加密，存在被网络嗅探窃取的风险
修复建议：前端在提交登录请求前，应使用SM2或RSA等非对称加密算法对口令进行加密，确保敏感凭证在传输过程中以密文形式存在。"
```

